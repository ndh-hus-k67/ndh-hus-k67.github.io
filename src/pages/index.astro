---
// Import the necessary components
import MainLayout from "@/layouts/MainLayout.astro";
import HeroSection from "@components/sections/landing/HeroSection.astro";
import HeroSectionAlt from "@components/sections/landing/HeroSectionAlt.astro";
import ClientsSection from "@components/sections/landing/ClientsSection.astro";
import FeaturesGeneral from "@components/sections/features/FeaturesGeneral.astro";
import FeaturesNavs from "@components/sections/features/FeaturesNavs.astro";
import TestimonialsSection from "@components/sections/testimonials/TestimonialsSection.astro";
import PricingSection from "@components/sections/pricing/PricingSection.astro";
import FAQ from "@components/sections/misc/FAQ.astro";
import AnnouncementBanner from "@components/ui/banners/AnnouncementBanner.astro";
import ProductCategoriesSection from "@components/sections/landing/ProductCategoriesSection.astro";
import heroImage from "@images/hero-image.avif";
import faqs from "@data/faqs.json";
import features from "@data/features.json";
import pricing from "@data/pricing.json";
import construction from "@images/construction-image.avif";
import tools from "@images/automated-tools.avif";
import dashboard from "@images/dashboard-image.avif";
import bulongImage from "@images/bu-long-category.avif";
import ocvitImage from "@images/oc-vit-category.avif";
import tantugiuImage from "@images/tan-tu-giu-category.avif";
import tantrutugiuImage from "@images/tan-tru-tu-giu-category.avif";
import trurentugiuImage from "@images/tru-ren-tu-giu-category.avif";
import { partnersData } from "@/data_files/constants";
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";

// Lấy tất cả sản phẩm để đếm số lượng theo danh mục
const allProducts: CollectionEntry<"products">[] = await getCollection("products");

// Định nghĩa các danh mục sản phẩm
const productCategories = [
  {
    slug: "bu-long",
    name: "Bu Lông",
    description: "Đa dạng bu lông inox, lục giác, chữ T với nhiều kích thước và cấp bền. Đảm bảo chất lượng theo tiêu chuẩn quốc tế.",
    icon: "M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5",
    image: bulongImage,
    imageAlt: "Bộ sưu tập bu lông chất lượng cao",
    count: allProducts.filter(p => {
      const categorySlug = typeof p.data.category === 'string' ? p.data.category : p.data.category?.slug;
      return categorySlug === "bu-long";
    }).length,
    features: [
      "Inox 304, 316 chống gỉ",
      "Kích thước M6 - M42",
      "Cấp bền 8.8, 10.9, 12.9"
    ],
    highlights: [
      { label: "Tiêu chuẩn", value: "DIN, ASTM" },
      { label: "Giao hàng", value: "24h" }
    ]
  },
  {
    slug: "oc-vit",
    name: "Ốc Vít",
    description: "Vít bắn tôn, vít tự khoan inox với đầu chìm, đầu trụ, đầu lục giác. Phù hợp kim loại, gỗ, nhựa.",
    icon: "M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",
    image: ocvitImage,
    imageAlt: "Các loại ốc vít đa dạng",
    count: allProducts.filter(p => {
      const categorySlug = typeof p.data.category === 'string' ? p.data.category : p.data.category?.slug;
      return categorySlug === "oc-vit";
    }).length,
    features: [
      "Tự khoan, tự taro",
      "Phủ kẽm chống ăn mòn",
      "Đa dạng đầu vít"
    ],
    highlights: [
      { label: "Kích thước", value: "M2.5 - M12" },
      { label: "Giao hàng", value: "24h" }
    ]
  },
  {
    slug: "tan-tu-giu",
    name: "Tán Tự Giữ",
    description: "Tán tự giữ inox và thép, lắp đặt nhanh không cần ren. Độ bền cao cho môi trường khắc nghiệt.",
    icon: "M20 7h-7M20 12h-7M20 17h-7M3 7h4M3 12h4M3 17h4",
    image: tantugiuImage,
    imageAlt: "Tán tự giữ chất lượng cao",
    count: allProducts.filter(p => {
      const categorySlug = typeof p.data.category === 'string' ? p.data.category : p.data.category?.slug;
      return categorySlug === "tan-tu-giu";
    }).length,
    features: [
      "Đầu tròn, đầu lục giác",
      "Inox 304, 316",
      "Lắp nhanh không ren"
    ],
    highlights: [
      { label: "Kích thước", value: "M3 - M12" },
      { label: "Tư vấn", value: "24/7" }
    ]
  }
  ,
  {
    slug: "tan-tru-tu-giu",
    name: "Tán Trụ Tự Giữ",
    description: "Tán Trụ Tự Giữ cho ứng dụng công nghiệp và dân dụng, lắp nhanh, chống rung.",
    icon: "M10 2v4M2 12h20M2 17h20M5 7v10",
    image: tantrutugiuImage,
    imageAlt: "Tán Trụ Tự Giữ chất lượng",
    count: allProducts.filter(p => {
      const categorySlug = typeof p.data.category === 'string' ? p.data.category : p.data.category?.slug;
      return categorySlug === "tan-tru-tu-giu";
    }).length,
    features: [
      "Lắp nhanh không cần ren",
      "Chống rung tốt",
      "Vật liệu inox và thép"
    ],
    highlights: [
      { label: "Kích thước", value: "M3 - M16" },
      { label: "Giao hàng", value: "24h" }
    ]
  },
  {
    slug: "tru-ren-tu-giu",
    name: "Trụ Ren Tự Giữ",
    description: "Trụ ren tự giữ với độ bền cao, dùng cho kết cấu chịu tải, xử lý bề mặt chống ăn mòn.",
    icon: "M12 2L2 7l10 5 10-5-10-5z",
    image: trurentugiuImage,
    imageAlt: "Trụ ren tự giữ",
    count: allProducts.filter(p => {
      const categorySlug = typeof p.data.category === 'string' ? p.data.category : p.data.category?.slug;
      return categorySlug === "tru-ren-tu-giu";
    }).length,
    features: [
      "Rèn phủ bề mặt",
      "Độ bền cao",
      "Phù hợp kết cấu chịu tải"
    ],
    highlights: [
      { label: "Tiêu chuẩn", value: "DIN" },
      { label: "Tư vấn", value: "24/7" }
    ]
  }
];
---

<MainLayout>


  <HeroSection
    title=`Bu lông ốc vít chất lượng cao HAHU<span class="text-yellow-500 dark:text-yellow-400">TECH</span>`
    subTitle="Giải pháp liên kết cho công nghiệp và xây dựng"
    primaryBtn="Về chúng tôi"
    primaryBtnURL="/about-us"
    secondaryBtn="Liên hệ"
    secondaryBtnURL="/contact"
    withReview={true}
    rating=`<span class="font-bold">4.8</span> / 5`
    starCount={4}
    reviews=`Hơn <span class="font-bold">500+</span> khách hàng tin dùng`
    src={heroImage}
    alt="Sản phẩm bu lông ốc vít HAHUTECH"
  />

  <!-- <ClientsSection
    title="Được tin tưởng bởi các doanh nghiệp hàng đầu"
    subTitle="Đối tác của các công ty xây dựng và sản xuất lớn tại Việt Nam"
    partners={partnersData}
  /> -->

  <ProductCategoriesSection
    title="Danh mục sản phẩm"
    subTitle="Đa dạng sản phẩm bu lông, ốc vít và phụ kiện chất lượng cao"
    categories={productCategories}
  />

  <FeaturesGeneral
    title="Tại sao chọn HAHUTECH?"
    subTitle="Chuyên cung cấp và sản xuất bu lông, ốc vít với tiêu chuẩn chất lượng quốc tế, công nghệ hiện đại và cam kết mang đến giải pháp tối ưu cho mọi dự án."
    features={features}
  />

  <FeaturesNavs
    title=`<span class="text-yellow-500 dark:text-yellow-400">HAHUTECH</span> - Giải pháp hoàn hảo cho dự án của bạn`
    tabs={[
      {
        heading: "Chất lượng đảm bảo",
        content:
          "Sản xuất theo tiêu chuẩn quốc tế với công nghệ hiện đại, quy trình kiểm soát chất lượng nghiêm ngặt đảm bảo độ bền và độ chính xác cao.",
        svg: "tools",
        src: tools,
        alt: "Sản xuất bu lông ốc vít chất lượng cao",
        first: true,
      },
      {
        heading: "Đa dạng sản phẩm",
        content:
          "Kho hàng phong phú với nhiều kích thước và cấp độ bền khác nhau, sẵn sàng đáp ứng nhanh chóng mọi yêu cầu từ dự án nhỏ đến công trình lớn.",
        svg: "dashboard",
        src: dashboard,
        alt: "Kho hàng đa dạng sản phẩm",
        second: true,
      },
      {
        heading: "Dịch vụ chuyên nghiệp",
        content:
          "Tư vấn kỹ thuật chuyên sâu và hỗ trợ tận tâm. Đội ngũ luôn sẵn sàng tư vấn lựa chọn sản phẩm phù hợp và cung cấp giải pháp tối ưu.",
        svg: "house",
        src: construction,
        alt: "Dịch vụ tư vấn chuyên nghiệp",
      },
    ]}
  />

  <!-- <TestimonialsSection
    title="Khách hàng nói gì về chúng tôi"
    subTitle="Sản phẩm chất lượng cao, giao hàng nhanh chóng và dịch vụ chuyên nghiệp"
    testimonials={[
      {
        content:
          "HAHUTECH cung cấp sản phẩm bu lông ốc vít chất lượng cao với giá hợp lý. Sản phẩm đạt tiêu chuẩn, giao hàng đúng hạn. Chúng tôi rất hài lòng!",
        author: "Nguyễn Văn An",
        role: "Giám đốc kỹ thuật | Công ty Xây dựng Việt Nam",
        avatarSrc: "",
      },
    ]}
    statistics={[
      {
        count: "500+",
        description:
          "khách hàng tin tưởng",
      },
      {
        count: "50+",
        description:
          "loại sản phẩm đa dạng",
      },
      {
        count: "99%",
        description:
          "đạt tiêu chuẩn chất lượng",
      },
      {
        count: "24h",
        description:
          "giao hàng nội thành",
      },
    ]}
  /> -->

  <!-- <PricingSection pricing={pricing} /> -->

  <FAQ title="Câu hỏi thường gặp" faqs={faqs} />


</MainLayout>
